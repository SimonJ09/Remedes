<script>
    // Script pour sauvegarder les ingrédients
    document.getElementById("saveIngredients").addEventListener("click", function () {
        const selectedIngredients = [];
        document.querySelectorAll(".form-check-input:checked").forEach((checkbox) => {
            const ingredientId = checkbox.value;
            const quantityInput = document.getElementById(`quantity${ingredientId}`);
            const quantity = quantityInput ? quantityInput.value : "";
            selectedIngredients.push({ id: ingredientId, quantity });
        });
    
        console.log("Ingrédients sélectionnés :", selectedIngredients);
    
        const ingredientsInput = document.createElement("input");
        ingredientsInput.type = "hidden";
        ingredientsInput.name = "ingredients";
        ingredientsInput.value = JSON.stringify(selectedIngredients);
        const form = document.querySelector("form");
        form.appendChild(ingredientsInput);
    
        // Fermer la modale
        const modal = bootstrap.Modal.getInstance(document.getElementById("ingredientsModal"));
        if (modal) {
            modal.hide();
        }
    });
    
    // Script pour sauvegarder les maux
    document.getElementById("saveMaux").addEventListener("click", function () {
        const selectedMaux = [];
        document.querySelectorAll(".form-check-input:checked").forEach((checkbox) => {
            const malId = checkbox.value;
            selectedMaux.push({ id: malId });
        });
    
        console.log("Maux sélectionnés :", selectedMaux);
    
        const mauxInput = document.createElement("input");
        mauxInput.type = "hidden";
        mauxInput.name = "maux";
        mauxInput.value = JSON.stringify(selectedMaux);
        const form = document.querySelector("form");
        form.appendChild(mauxInput);
    
        // Fermer la modale
        const modal = bootstrap.Modal.getInstance(document.getElementById("mauxModal"));
        if (modal) {
            modal.hide();
        }
    });
    </script>